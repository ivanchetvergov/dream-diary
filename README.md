# DreamDiary AI

DreamDiary AI -  для персонализированного анализа снов с использованием машинного обучения и искусственного интеллекта. Проект позволяет пользователям анализировать свои сны через Telegram-бот, получая психологические интерпретации, анализ эмоций и рекомендации.

## Возможности

- **Анализ снов**: Психологический анализ снов на основе теорий Юнга, Фрейда и когнитивно-поведенческой терапии
- **История снов**: Сохранение всех анализов в базе данных для отслеживания паттернов
- **Telegram-интерфейс**: Простой и удобный бот для взаимодействия

## Установка

### Предварительные требования

- Python 3.8+
- Docker и Docker Compose
- Аккаунт Anthropic (для Claude API)
- Токен Telegram Bot (от @BotFather)

### Шаги установки

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/yourusername/dream-Diary-ai.git
   cd dream-Diary-ai
   ```

2. Установите зависимости:

   ```bash
   pip install -r requirements.txt
   ```

3. Настройте базу данных:

   ```bash
   docker compose up --build -d db
   ```

4. Создайте файл `.env` в корне проекта:

   ```bash
   ANTHROPIC_API_KEY=ваш_ключ_claude
   TELEGRAM_BOT_TOKEN=ваш_токен_бота
   DATABASE_URL=postgresql://postgres:password@localhost:5434/dreamdiary
   ```

## Запуск

### Запуск базы данных

```bash
docker compose up -d db
```

### Запуск бота

```bash
python -m bot.bot_handler
```

Бот будет работать в фоне и отвечать на сообщения в Telegram.

## Использование

1. Найдите бота в Telegram по имени или токену
2. Отправьте команду `/start` для приветствия
3. Отправьте описание своего сна в текстовом сообщении
4. Получите подробный анализ с психологическими интерпретациями, эмоциями и рекомендациями

Пример сообщения:

```text
Мне приснилось, что я летаю над океаном, но потом начинаю падать и просыпаюсь в страхе.
```

Бот ответит анализом на русском языке.

## Архитектура

Проект построен по модульной архитектуре:

- `agent/` - Основной AI-агент на базе Claude для анализа снов
- `bot/` - Telegram-бот для взаимодействия с пользователями
- `db/` - Модели данных, репозитории и подключение к PostgreSQL
- `config.py` - Конфигурация приложения
- `utils/` - Вспомогательные функции (перевод, логирование)

### База данных

Используется PostgreSQL с следующими таблицами:

- `users` - Пользователи Telegram
- `dreams` - Сны с анализом
- `classifications` - Эмоции и символы снов
- `chat_history` - История переписок

## Технологии

- **Python 3.8+** - Основной язык
- **Claude (Anthropic)** - AI для анализа снов
- **Telegram Bot API** - Интерфейс пользователя
- **SQLAlchemy** - ORM для работы с БД
- **PostgreSQL** - База данных
- **Docker** - Контейнеризация

## Разработка

Для разработки рекомендуется использовать виртуальное окружение:

```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или venv\Scripts\activate на Windows
pip install -r requirements.txt
```

### Тестирование

```bash
python -m agent.dream_agent  # тест агента напрямую
```
